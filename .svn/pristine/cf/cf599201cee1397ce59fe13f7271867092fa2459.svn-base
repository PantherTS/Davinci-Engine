#ifndef LUAMODULE_H
#define LUAMODULE_H

#include "LuaInterface.h"
#include <LUA/lua.hpp>

namespace DavinciEngine{

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary> Singleton LUA state class. </summary>
	////////////////////////////////////////////////////////////////////////////////////////////////////
	class LUAModule{
	public:

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Gets the instance.</summary>
		///
		/// <returns> null if it fails, else the instance.</returns>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		static LUAModule *GetInstance();

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Destroys this object.</summary>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		void Destroy();

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Gets the LUA state.</summary>
		///
		/// <returns> null if it fails, else the lua state.</returns>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		lua_State* GetLuaState();

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Executes the script operation.</summary>
		///
		/// <param name="scriptFile"> The script file.</param>
		///
		/// <returns> true if it succeeds, false if it fails.</returns>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		bool RunScript(const char* scriptFile);

	private:

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Default constructor.</summary>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		LUAModule();

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Destructor.</summary>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		~LUAModule();

		/// <summary> The pointer to the LUAModule class singleton </summary>
		static LUAModule* m_pLUAModule;

		/// <summary> The LUA state </summary>
		lua_State* m_pLUAState;
	};
}
#endif
