#include "Graphic.h"
#include "Framework.h"
#include "TextureAsset.h"

#include "gl/glew.h"

using namespace DavinciEngine;

OpenGLFunctions *OpenGLFunctions::m_pOpenGLFunctions = nullptr;

OpenGLFunctions::OpenGLFunctions()
{
}

OpenGLFunctions *OpenGLFunctions::GetInstance(){
	if(!m_pOpenGLFunctions){
		m_pOpenGLFunctions = new OpenGLFunctions();
	}
	return m_pOpenGLFunctions;
}

OpenGLFunctions::~OpenGLFunctions()
{
}

void OpenGLFunctions::MakeQuad(float width, float height, const Vec2D &textureOffset, const Vec2D &textureScale, const Vec2D &position)
{
	float halfWidth = width*0.5f;
	float halfHeight = height*0.5f;

	glBegin(GL_QUADS);
	//Top Left
	glTexCoord2f(textureOffset.x, textureOffset.y);
	glVertex3f(halfWidth + position.x, halfHeight + position.y, 0.0f);

	//Bottom Left
	glTexCoord2f(textureOffset.x + textureScale.x, textureOffset.y);
	glVertex3f(-halfWidth + position.x, halfHeight + position.y, 0.0f);

	//Bottom Right
	glTexCoord2f(textureOffset.x + textureScale.x, textureOffset.y + textureScale.y);
	glVertex3f(-halfWidth + position.x, -halfHeight + position.y, 0.0f);

	//Top Right
	glTexCoord2f(textureOffset.x, textureOffset.y + textureScale.y);
	glVertex3f(halfWidth + position.x, -halfHeight + position.y, 0.0f);
	glEnd();
}