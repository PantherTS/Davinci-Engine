#ifndef WINDOW_H
#define WINDOW_H

#include <string>
#include <list>
#include <SDL/SDL.h>
#include "XmlSettings.h"

namespace DavinciEngine{

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary> The Window class represents a visible viewport. </summary>
	////////////////////////////////////////////////////////////////////////////////////////////////////
	class Window
	{
	public:

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Destructor.</summary>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		~Window();

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Creates a new window.</summary>
		///
		/// <param name="title">	  The title.</param>
		/// <param name="width">	  The width.</param>
		/// <param name="height">	  The height.</param>
		/// <param name="bpp">		  The bpp.</param>
		/// <param name="fullscreen"> true to fullscreen.</param>
		///
		/// <returns> null if it fails, else.</returns>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		static Window *NewWindow(const std::string &title, int width, int height, int bpp, bool fullscreen);

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Gets a window by title.</summary>
		///
		/// <param name="title"> The title.</param>
		///
		/// <returns> null if it fails, else the window.</returns>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		static Window *GetWindow(const std::string &title);

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Destroys a window by the given title.</summary>
		///
		/// <param name="title"> The const string & to destroy.</param>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		static void Destroy(const std::string &title);

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Destroys this object.</summary>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		void Destroy();

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Sets the size of the window.</summary>
		///
		/// <param name="width">	  The width.</param>
		/// <param name="height">	  The height.</param>
		/// <param name="fullscreen"> true to fullscreen.</param>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		void SetSize(int width, int height, bool fullscreen);

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Gets the height.</summary>
		///
		/// <returns> The height.</returns>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		int GetHeight(){return m_iHeight;};

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Gets the width.</summary>
		///
		/// <returns> The width.</returns>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		int GetWidth(){return m_iWidth;};

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Query if this object is fullscreen.</summary>
		///
		/// <returns> true if fullscreen, false if not.</returns>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		bool IsFullscreen(){return m_bFullscreen;};

		/// <summary> The SDL surface in the window </summary>
		SDL_Window* m_pScreen;

		/// <summary> The SDL OpenGL context </summary>
		SDL_GLContext m_GLContext;
	
	private:

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Constructor.</summary>
		///
		/// <param name="title">	  The title.</param>
		/// <param name="width">	  The width.</param>
		/// <param name="height">	  The height.</param>
		/// <param name="bpp">		  The bpp.</param>
		/// <param name="fullscreen"> true to fullscreen.</param>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		Window(const std::string &title,int width, int height, int bpp, bool fullscreen);

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Initializes the SDL subsystem.</summary>
		///
		/// <returns> true if it succeeds, false if it fails.</returns>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		bool SDLInit();

		////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary> Initializes the OpenGL subsystem.</summary>
		////////////////////////////////////////////////////////////////////////////////////////////////////
		void OGLInit();
		
		/// <summary> Width of the window </summary>
		int m_iWidth;

		/// <summary> Height of the window </summary>
		int m_iHeight;

		/// <summary> Defines how many Bits Per Pixel the window is displaying </summary>
		int m_iBpp;
		
		/// <summary> SDL/OpenGL window flags </summary>
		Uint32 m_iFlags;
		
		/// <summary> true to fullscreen </summary>
		bool m_bFullscreen;

		/// <summary> The window's title </summary>
		std::string m_sTitle;
		
		/// <summary> Container holding pointers to all Window objects. </summary>
		static std::list<Window*> m_Windows;

	};
}
#endif
